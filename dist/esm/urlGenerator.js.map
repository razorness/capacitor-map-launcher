{"version":3,"file":"urlGenerator.js","sourceRoot":"","sources":["../../src/urlGenerator.ts"],"names":[],"mappings":"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","sourcesContent":["import { Capacitor } from '@capacitor/core';\n\nimport { MapType } from './definitions';\n\nfunction encode(str: string | undefined, alt?: string | undefined): string | undefined {\n\tif (str) {\n\t\treturn encodeURIComponent(str);\n\t}\n\treturn alt ?? undefined;\n}\n\nexport function generateMarkerUrl(mapType: MapType, coords: number[], title?: string, description?: string, zoom = 16): string {\n\n\tswitch (mapType) {\n\t\tcase MapType.GOOGLE:\n\t\t\treturn buildUrl(\n\t\t\t\tCapacitor.getPlatform() === 'ios' ? 'comgooglemaps://' : 'geo:0,0',\n\t\t\t\t{\n\t\t\t\t\t'q'   : `${coords[ 1 ]},${coords[ 0 ]}${title ? `(${encode(title)})` : ''}`,\n\t\t\t\t\t'zoom': zoom.toString(),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.GOOGLE_GO:\n\t\t\treturn buildUrl(\n\t\t\t\t'http://maps.google.com/maps',\n\t\t\t\t{\n\t\t\t\t\t'q'   : `${coords[ 1 ]},${coords[ 0 ]}${title ? `(${encode(title)})` : ''}`,\n\t\t\t\t\t'zoom': zoom.toString(),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.AMAP:\n\t\t\treturn buildUrl(\n\t\t\t\t`${Capacitor.getPlatform() === 'ios' ? 'ios' : 'android'}amap://viewMap`,\n\t\t\t\t{\n\t\t\t\t\t'sourceApplication': 'map_launcher',\n\t\t\t\t\t'poiname'          : encode(title, ''),\n\t\t\t\t\t'lat'              : `${coords[ 1 ]}`,\n\t\t\t\t\t'lon'              : `${coords[ 0 ]}`,\n\t\t\t\t\t'zoom'             : zoom.toString(),\n\t\t\t\t\t'dev'              : '0',\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.BAIDU:\n\t\t\treturn buildUrl(\n\t\t\t\t'baidumap://map/marker',\n\t\t\t\t{\n\t\t\t\t\t'location'  : `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t'title'     : encode(title, 'Title'),\n\t\t\t\t\t'content'   : encode(description, 'Description'), // baidu fails if no description provided\n\t\t\t\t\t'traffic'   : 'on',\n\t\t\t\t\t'src'       : 'com.map_launcher',\n\t\t\t\t\t'coord_type': 'gcj02',\n\t\t\t\t\t'zoom'      : zoom.toString(),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.APPLE:\n\t\t\treturn buildUrl(\n\t\t\t\t'http://maps.apple.com/maps',\n\t\t\t\t{\n\t\t\t\t\t'saddr': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.WAZE:\n\t\t\treturn buildUrl(\n\t\t\t\t'waze://',\n\t\t\t\t{\n\t\t\t\t\t'll': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t'z' : zoom.toString(),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.YANDEX_NAVI:\n\t\t\treturn buildUrl(\n\t\t\t\t'yandexnavi://show_point_on_map',\n\t\t\t\t{\n\t\t\t\t\t'lat'       : `${coords[ 1 ]}`,\n\t\t\t\t\t'lon'       : `${coords[ 0 ]}`,\n\t\t\t\t\t'zoom'      : zoom.toString(),\n\t\t\t\t\t'no-balloon': '0',\n\t\t\t\t\t'desc'      : encode(title, ''),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.YANDEX_MAPS:\n\t\t\treturn buildUrl(\n\t\t\t\t'yandexmaps://maps.yandex.ru/',\n\t\t\t\t{\n\t\t\t\t\t'pt': `${coords[ 0 ]},${coords[ 1 ]}`,\n\t\t\t\t\t'z' : zoom.toString(),\n\t\t\t\t\t'l' : 'map',\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.CITYMAPPER:\n\t\t\treturn buildUrl(\n\t\t\t\t'citymapper://directions',\n\t\t\t\t{\n\t\t\t\t\t'endcoord': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t'endname' : encode(title, ''),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.MAPSWITHME:\n\t\t\treturn buildUrl(\n\t\t\t\t'mapsme://map',\n\t\t\t\t{\n\t\t\t\t\t'v' : '1',\n\t\t\t\t\t'll': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t'n' : encode(title),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.OSMAND:\n\t\tcase MapType.OSMANDPLUS:\n\t\t\tif (Capacitor.getPlatform() === 'ios') {\n\t\t\t\treturn buildUrl(\n\t\t\t\t\t'osmandmaps://',\n\t\t\t\t\t{\n\t\t\t\t\t\t'lat'  : `${coords[ 1 ]}`,\n\t\t\t\t\t\t'lon'  : `${coords[ 0 ]}`,\n\t\t\t\t\t\t'z'    : zoom.toString(),\n\t\t\t\t\t\t'title': encode(title),\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn buildUrl(\n\t\t\t\t'http://osmand.net/go',\n\t\t\t\t{\n\t\t\t\t\t'lat': `${coords[ 1 ]}`,\n\t\t\t\t\t'lon': `${coords[ 0 ]}`,\n\t\t\t\t\t'z'  : zoom.toString(),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.DOUBLE_GIS:\n\t\t\tif (Capacitor.getPlatform() === 'ios') {\n\t\t\t\treturn `dgis://2gis.ru/geo/${coords[ 0 ]},${coords[ 1 ]}`;\n\t\t\t}\n\n\t\t\t// android app does not seem to support marker by coordinates\n\t\t\t// so falling back to directions\n\t\t\treturn `dgis://2gis.ru/routeSearch/rsType/car/to/${coords[ 0 ]},${coords[ 1 ]}`;\n\n\t\tcase MapType.TENCENT:\n\t\t\treturn buildUrl(\n\t\t\t\t'qqmap://map/marker',\n\t\t\t\t{\n\t\t\t\t\t'marker': `coord:${coords[ 1 ]},${coords[ 0 ]}${title ? `;title:${encode(title)}` : ''}`,\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.HERE:\n\t\t\treturn buildUrl(\n\t\t\t\t`https://share.here.com/l/${coords[ 1 ]},${coords[ 0 ]},${encode(title)}`,\n\t\t\t\t{\n\t\t\t\t\t'z': zoom.toString(),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.PETAL:\n\t\t\treturn buildUrl(\n\t\t\t\t'petalmaps://poidetail',\n\t\t\t\t{\n\t\t\t\t\t'marker': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t'z'     : zoom.toString(),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.TOMTOMGO:\n\t\t\tif (Capacitor.getPlatform() === 'ios') {\n\t\t\t\t// currently uses the navigate endpoint on iOS, even when just showing a marker\n\t\t\t\treturn buildUrl(\n\t\t\t\t\t'tomtomgo://x-callback-url/navigate',\n\t\t\t\t\t{\n\t\t\t\t\t\t'destination': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn buildUrl(\n\t\t\t\t`geo:${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t{\n\t\t\t\t\t'q': `${coords[ 1 ]},${coords[ 0 ]}${title ? `(${encode(title)})` : ''}`,\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.COPILOT:\n\t\t\t// Documentation:\n\t\t\t// https://developer.trimblemaps.com/copilot-navigation/v10-19/feature-guide/advanced-features/url-launch/\n\t\t\treturn buildUrl(\n\t\t\t\t'copilot://mydestination',\n\t\t\t\t{\n\t\t\t\t\t'type'  : 'LOCATION',\n\t\t\t\t\t'action': 'VIEW',\n\t\t\t\t\t'marker': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t'name'  : encode(title, ''),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.TOMTOMGOFLEET:\n\t\t\treturn buildUrl(\n\t\t\t\t`geo:${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t{\n\t\t\t\t\t'q': `${coords[ 1 ]},${coords[ 0 ]}${title ? `(${encode(title)})` : ''}`,\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.SYGIC_TRUCK:\n\t\t\t// Documentation:\n\t\t\t// https://www.sygic.com/developers/professional-navigation-sdk/introduction\n\t\t\treturn `com.sygic.aura://coordinate|${coords[ 0 ]}|${coords[ 1 ]}|show`;\n\n\t\tcase MapType.FLITSMEISTER:\n\t\t\tif (Capacitor.getPlatform() === 'ios') {\n\t\t\t\treturn buildUrl(\n\t\t\t\t\t'flitsmeister://',\n\t\t\t\t\t{\n\t\t\t\t\t\t'geo': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn buildUrl(\n\t\t\t\t`geo:${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t{\n\t\t\t\t\t'q': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.TRUCKMEISTER:\n\t\t\tif (Capacitor.getPlatform() === 'ios') {\n\t\t\t\treturn buildUrl(\n\t\t\t\t\t'truckmeister://',\n\t\t\t\t\t{\n\t\t\t\t\t\t'geo': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn buildUrl(\n\t\t\t\t`geo:${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t{\n\t\t\t\t\t'q': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.NAVER:\n\t\t\treturn buildUrl(\n\t\t\t\t'nmap://place',\n\t\t\t\t{\n\t\t\t\t\t'lat' : `${coords[ 1 ]}`,\n\t\t\t\t\t'lng' : `${coords[ 0 ]}`,\n\t\t\t\t\t'zoom': zoom.toString(),\n\t\t\t\t\t'name': encode(title),\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.KAKAO:\n\t\t\treturn buildUrl(\n\t\t\t\t'kakaomap://look',\n\t\t\t\t{\n\t\t\t\t\t'p': `${coords[ 1 ]},${coords[ 0 ]}`,\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.TMAP:\n\t\t\treturn buildUrl(\n\t\t\t\t'tmap://viewmap',\n\t\t\t\t{\n\t\t\t\t\t'name': encode(title, ''),\n\t\t\t\t\t'x'   : `${coords[ 0 ]}`,\n\t\t\t\t\t'y'   : `${coords[ 1 ]}`,\n\t\t\t\t},\n\t\t\t);\n\n\t\tcase MapType.MAPY_CZ:\n\t\t\treturn buildUrl(\n\t\t\t\t'https://mapy.cz/zakladni',\n\t\t\t\t{\n\t\t\t\t\t'id'    : '${coords[ 0 ]},${coords[ 1 ]}',\n\t\t\t\t\t'z'     : zoom.toString(),\n\t\t\t\t\t'source': 'coor',\n\t\t\t\t},\n\t\t\t);\n\t\tdefault:\n\t\t\treturn `geo:${coords[ 1 ]},${coords[ 0 ]}`;\n\t}\n\n}\n\nfunction buildUrl(url: string, query?: Record<string, string | null | undefined>): string {\n\tif (!query) {\n\t\treturn url;\n\t}\n\tconst qry: string[] = [];\n\tfor (const key in query) {\n\t\tif (typeof query[ key ] === 'string') {\n\t\t\tqry.push(key + '=' + query[ key ]);\n\t\t}\n\t}\n\n\treturn url + '?' + qry.join('&');\n}\n"]}